# MDDVRExtractor 1.3.2b (08.08.2013)
## Информация о программе.

Назначение: Извлечение и конвертация данных видеонаблюдения регистраторов Microdigital.<br>
Версия: 1.3.2b от 08.08.2013<br>
Автор: Алексей Докшин (все права принадлежат автору)<br>
Контакты: dant.it@gmail.com<br>
Лицензия: Ограниченная ознакомительная версия только для некоммерческого персонального использования<br>

ВНИМАНИЕ! Данная программа предоставляется автором 'как есть' - без каких-либо явных или подразумеваемых гарантий. Пользователь использует её целиком на свой страх и риск. Автор не несёт ответственности за любой возможный причинённый ущерб!

## Системные требования.
Для запуска программы необходим Java SE (JRE/JDK) v1.8.x.<br>
Страница загрузки: http://www.oracle.com/technetwork/java/javase/downloads/index.html<br>
Для обработки и транскодирования требуется ffmpeg. Желательно использовать идущий в комплекте - от версии к версии изменялись ключи и поведение при
обработке. При более ранних версиях возможна как частичная, так и полная неработоспособность программы.<br>
Страница загрузки:<br>
для Linux: http://ffmpeg.org/download.html<br>
для Windows: http://ffmpeg.zeranoe.com/builds/

## Установка и настройка.
Необходимо установить окружение Java JRE/JDK, если не установлено. Проверить можно командой java -version в консоли, если окружение установлено, то выведет название Java машины и её версию.<br>
Если нет желания использовать ffmpeg, идущий в комплекте (исполняемый файл в локальном каталоге ffmeg), его необходимо удалить и установить пакет ffmpeg отдельно. Следует обязательно проверить, что ffmpeg успешно запускается из произвольного каталога (т. е. путь до ffmpeg добавлен в список каталогов, где происходит поиск для запуска по умолчанию). Для Windows — путь должен быть добавлен в переменную окружения PATH.<br>
Какой либо установки и настройки самой программы не требуется, достаточно скопировать файлы программы в выбранный каталог и запустить один из файлов:
для Linux — start.sh, для Windows — start.bat, или вручную, командой — java -jar MDDVRExtract.jar

## Возможности и ограничения.
Возможно извлечение данных из следующих видов источников:<br>
• файлы архивов выгружаемые видеорегистратором (*.exe);<br>
• файлы файловой системы видеорегистратора (da#####);<br>
• файлы локального хранилища CMS (da#####);<br>
• жесткий диск видеорегистратора (xfs).<br>
При этом возможен выбор в качестве источника как одиночного файла, так и каталога — со сканированием всех вложенных подкаталогов и файлов.
При сохранении извлечённых данных возможна сквозная перекодировка в любой формат, поддерживаемый ffmpeg. Сохранение происходит в файлы следующих типов: AVI, MPEG4 или MKV.

При выборе режима «без перекодировки» — видео сохраняется в оригинальной кодировке. Аудио всегда транскодируется по причине того, что формат хранения аудио является модифицированным вариантом алгоритма PCM и всегда предварительно декодируется программой. Алгоритм декодирования был воссоздан и реализован с помощью изучения кода утилиты производителя, но ввиду того, что у автора в наличии всего один DVR данного производителя — реализация является не полной и, возможно, для каких-то вариантов DVR аудио не будет извлекаться корректно.

Информация о дате и времени сохраняется в субтитрах, чтобы не изменять данные при сохранении без перекодировки. И аудио и субтитры можно сохранять как в отдельные файлы, так и в файл с видео (ограничение накладывает тип выбранного файла — некоторые контейнеры не позволяют сохранять субтитры).<br>
При повреждении файла битые кадры исключаются из ряда, при этом возможно появление артефактов.

Не реализовано:<br>
• расширенная обработка повреждённых файлов;<br>
• возможность использования метаданных HDD для построения списка хранимых данных (без сканирования файлов).
